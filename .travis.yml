---
language: python
python: "2.7"
dist: trusty
sudo: false
group: beta
services: [docker]

install:
  - pip install -r tests/requirements.txt
  - ansible-galaxy install git+file://$(pwd),$(git rev-parse --abbrev-ref HEAD) -p .molecule/roles
  - molecule dependency

script:
  - pre-commit run --all-files
  - ansible-playbook -i localhost, -c local -C tests/playbook.yml -e 'ansible_python_interpreter=/usr/bin/python2.7'

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  email: false
